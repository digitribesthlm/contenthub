MongoDB Integration Analysis
============================

Current State:
--------------
1. Authentication: Uses mock user data with simple string comparison
   - Mock user: tt@tt.se / sfsdf!
   - User has clientId: 6728ba02768b0b66c95ccadbc8
   - Login returns User object without password

2. Data Structure:
   - Users collection: email, password, role, clientId, created_at
   - Content Briefs: id, domainId, title, brief, content, status, contentType, heroImageUrl, createdAt, scheduledAt
   - Brand Guides: domainId, stylePrompt, toneOfVoice, styleImageUrl
   - Domains: Currently hardcoded (xxx, yyy, zzz)

3. Current Data Flow:
   - Login -> Sets isAuthenticated flag
   - Dashboard -> Shows all content filtered by domainId only
   - No clientId filtering implemented

Required Changes:
-----------------
1. Authentication Service:
   - Replace mock login with MongoDB query to users collection
   - Keep simple string password comparison (as requested)
   - Store user data (including clientId) in app state after login

2. Data Filtering:
   - Add clientId field to content_briefs collection schema
   - Add clientId field to brand_guides collection schema
   - Add clientId field to domains (or create domains collection)
   - Filter all queries by logged-in user's clientId

3. N8N Webhooks:
   - Update new brief webhook to include clientId
   - Update publish/schedule webhooks to verify clientId
   - Fetch data from MongoDB filtered by clientId

4. Implementation Approach:
   - Create MongoDB service for database operations
   - Update authService to query MongoDB users collection
   - Update Dashboard to pass user/clientId to child components
   - Update all data fetching to filter by clientId
   - Update constants to load from MongoDB instead of hardcoded

MongoDB Collections Schema Updates:
------------------------------------
1. users (existing): No changes needed
2. content_briefs: Add clientId field
3. brand_guides: Add clientId field
4. domains: Create new collection with clientId field

Environment Variables Needed:
------------------------------
- MONGODB_URL
- MONGODB_DATABASE
- MONGODB_COLLECTION_USERS
- MONGODB_COLLECTION_CONTENT_BRIEFS
- MONGODB_COLLECTION_BRAND_GUIDES
- MONGODB_COLLECTION_DOMAINS (new)
